@{
    Layout = "~/_TileLayout.cshtml";
    Page.Head = "Chat";
    var chat = Chat.getInstance();
    
}

@section content {

    <input type="text" id="username" />
    <div>Chat Alias</div>
    <textarea id="messages" rows=9 readonly></textarea>
    <div></div>
    <input type="text" id="message" />

    <!-- Stop committing broken code. fixed. -->
    <script type="text/javascript">

	    function checkMessages() {
	        alert("Checking for new messages..");
	        var $textarea = $('#messages');
	        $textarea.val( "@chat.readableMessages()" );
	    }

	    $("#chatForm").submit(function (e) {
	        var $msg = $('message').val();
	        var $textarea = $('#messages');
                $textarea.val( $textarea.val() + ": " + $('#message').val() + "\n");
	 
                $('#message').val('');
	    
	    });

        function sendMessage() {  

            var $textarea = $('#messages');
            $textarea.val( $textarea.val() + $('#username').val() + ": " + $('#message').val() + "\n");
            $('#message').val('');
        }
    </script>
    <div> 
        <a class="btn" href="javascript:sendMessage()">Send Message</a>
    </div>
}